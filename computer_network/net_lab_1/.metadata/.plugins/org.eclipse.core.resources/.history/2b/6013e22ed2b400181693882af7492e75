package server;

import java.io.*;
import java.net.*;

public class DatagramEchoServer {
	public static void main(String[] args) throws Exception {
		
		DatagramSocket ds = new DatagramSocket(5555);
		byte buf[] = new byte[100];
		DatagramPacket dp = new DatagramPacket(buf, buf.length);
		InetAddress ia = dp.getAddress();
		System.out.println(ia + "와(과) 연결되었습니다.");

		while(true) {
		ds.receive(dp);
		ia = dp.getAddress();
		
		String tmp = new String(dp.getData());
		System.out.println("수신 : " + tmp);
		int portnum = dp.getPort();
		System.out.println("clientportnumber:"+portnum);
		byte buf1[] = tmp.getBytes();
		DatagramPacket dp1 = new DatagramPacket(buf1, buf1.length, ia, portnum);
		ds.send(dp);
		System.out.println("송 : " + tmp);
		
	}

}
}